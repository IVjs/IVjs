!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";function r(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function o(e){return JSON.parse(JSON.stringify(e))}function i(e){var t=r(e);return["null","undefined"].indexOf(t)>-1||["object","array","arguments","json","string"].indexOf(t)>-1&&("string"===t?0===e.length:0===Object.getOwnPropertyNames(e).length||0===e.length)}function a(e){return"object"===r(e)}function s(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var u=r?o(e):e,c={};for(var l in u)if(!1!==u.hasOwnProperty(l)){if(a(u[l])&&n){var p=Array.from(arguments).slice().slice(1),d=s.apply(this,[u[l]].concat(p));i(d)||(u[l]=d)}var f=t(l,u[l]);if(Array.isArray(f)&&2===f.length)c[f[0]]=f[1];else if(!i(f))throw new Error("It looks like you might have been trying to construct a new object, but you returned something other than an array that looks like [key, value]. You returned "+f)}return c}function u(e,t){for(var n=t.split("."),r=e,o=!0,i=[];o&&n.length>0;){var a=n.shift();a&&r[a]?(i.push(a),r=r[a]):o=!1}return{exists:o,existingPath:i.join("."),finalValidProperty:r}}function c(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var i="UpperFirst"===t,a=r?o(e):e,u=i?/[a-z]/:/[A-z]/;return s(a,function(e,t){var n=[e,t];return"string"!=typeof e?n:null===e.charAt(0).match(u)?n:[i?l(e):p(e),t]},n)}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e){return e.charAt(0).toLowerCase()+e.slice(1)}function d(e){if(!a(e))throw new Error("'obj' was not an object. Was "+r(e));return Object.keys(e).map(function(t){return e[t]})}function f(e,t){return-1!==d(t).indexOf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toType=r,t.round=function(e,t){return void 0===t&&(t=2),Number(Math.round(Number(e+"e"+t))+"e-"+t)},t.clone=o,t.isEmpty=i,t.isNotEmpty=function(e){return!i(e)},t.wrapObjectWithProperty=function(e,t,n){void 0===n&&(n=!0);var r={},i=n?o(e):e;return r[t]=i,r},t.isObject=a,t.traverseObject=s,t.nestedPropertyDetails=u,t.nestedPropertyTest=function(e,t,n){var r=u(e,t);return!!r.exists&&!!n(r.finalValidProperty)},t.nestedPropertyExists=function(e,t){return u(e,t).exists},t.changePropsInitialCase=c,t.firstCharToUpper=l,t.firstCharToLower=p,t.convertPropKeysForAsp=function(e){return c(e,"UpperFirst",!0)},t.convertPropKeysForJs=function(e){return c(e,"lowerFirst",!0)},t.valuesArrayFromObject=d,t.objectContainsValue=f,t.objectKeyForValue=function(e,t){return!!f(e,t)&&Object.keys(t).reduce(function(n,r){return t[r]===e&&(n=r),n},"")},t.forceArray=function(e){return-1!==["null","undefined"].indexOf(r(e))?[]:"array"!==r(e)?[e]:e};var h=function(){var e=[],t=[],n=!0;return function(r,o){if("object"==typeof o&&null!==o){n&&(r="__BASE_OBJECT__",n=!1);var i=e.indexOf(o);if(-1!==i)return"[circular reference of "+t[i]+"]";e.push(o),t.push(r)}return o}};function m(e,t){void 0===t&&(t={});var n=Object.assign({},{tabLength:2,stripQuotes:!1,sort:!1},t),o=n.tabLength,i=n.stripQuotes;if(n.sort){if("array"===r(e))return v(e.sort(),o,i);if("object"===r(e)){var a={};return Object.keys(e).sort().forEach(function(t){a[t]=e[t]}),v(a,o,i)}return v(e,o,i)}return v(e,o,i)}function v(e,t,n){var r=JSON.stringify(e,h(),t);return n&&(r=r.replace(/"(.*?)": /g,"$1: ")),r}t.stringify=m,t.deepEqual=function(e,t){var n={sort:!0};return m(e,n)===m(t,n)},t.mediaWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},t.mediaHeight=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},function(e,t){e.exports=function(e){return isMobile=function(){var t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isMobileOrTablet=function(){var t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},{isMobile:isMobile,isMobileOrTablet:isMobileOrTablet}}(navigator.userAgent||navigator.vendor||window.opera)},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(e,t,n){this.fn=e,this.context=t,this.once=n||!1}(n,r||e,i),s=o?o+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},u.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,i,a){var s=o?o+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,a),!0}for(c=1,u=new Array(p-1);c<p;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(d=1,u=new Array(p-1);d<p;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},u.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,e.exports=u},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(3);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var u=n(1),c=function(){function e(e,t,n,r){this.settings=e,this.nodes=t,this.commandRunnerClass=n,this.variables=r,this.targetFunctions={},this.runners={}}return e.prototype.registerTargetFunction=function(e){var t={settings:this.settings,variables:this.variables,commandEngine:this};Object.assign(this.targetFunctions,e(t))},e.prototype.run=function(e){this.createRunners(),e?this.runNodeByName(e):this.runFirstNode()},e.prototype.runCommands=function(e){return this.createCommandRunner(e).run()},e.prototype.createRunners=function(){var e=this;this.targetFunctions;this.nodes.forEach(function(t){var n=t.getCommands();e.runners[t.name]=e.createCommandRunner(n)})},e.prototype.createCommandRunner=function(e){return new this.commandRunnerClass({variables:this.variables,targetFunctions:this.targetFunctions,commands:e})},e.prototype.runFirstNode=function(){this.nodes[0]&&this.getRunnerForNode(this.nodes[0].name).run()},e.prototype.runNodeByName=function(e){return this.getRunnerForNode(e).run()},e.prototype.getRunnerForNode=function(e){return this.runners[e]},e}(),l=n(2),p=n(0),d={baseElementId:"IV-view",buttonContainerClass:"IV-button-container"};function f(e){var t=0,n=[];for(t=0;t<e.length;t++)n.push(e[t]);return n}function h(e,t){return Math.floor(Math.random()*(t-e+1))+e}function m(e){var t=Object(p.toType)(e);return function(e){return"object"===Object(p.toType)(e)}(e)?function e(t){var n={};return Object(p.traverseObject)(t,function(t,r){"array"===Object(p.toType)(r)?n[t]=m(r):"object"===Object(p.toType)(r)?n[t]=e(r):n[t]=r},!1,!1),n}(e):"array"===t?e.map(function(e){return m(e)}):e}function v(e){return"//"===e.substr(0,2)?""+document.location.protocol+e:"/"===e[0]?""+document.location.origin+e:-1===e.indexOf("/")?document.location.origin+"/"+e:e}var y=function(){function e(e){this.variables=e,this.LIQUID_ONE=/\{\{(.*?)( ?\| ?(.*)?)?\}\}/,this.LIQUID_ALL=new RegExp(this.LIQUID_ONE,"g"),this.implementedFilters={random:this.randomFilter.bind(this)}}return e.prototype.replace=function(e){var t=this.getParts(e);return t?t.whole===e?this.sendRawVar(e):this.replaceAsString(e):e},e.prototype.replaceAsString=function(e){var t=this;return e.replace(this.LIQUID_ALL,function(e){return t.filteredVariable(e).toString()})},e.prototype.getParts=function(e){var t=e.match(this.LIQUID_ONE);if(!t)return null;var n=t[0],r=t[1];t[2];return{whole:n,varName:r,filter:t[3]}},e.prototype.sendRawVar=function(e){var t,n=this;return e.replace(this.LIQUID_ALL,function(e){return t=n.filteredVariable(e),e}),t},e.prototype.filteredVariable=function(e){var t=this.getParts(e),n=(t.whole,t.varName),r=t.filter;return r?this.doFilter(n,r):this.variables[n]},e.prototype.doFilter=function(e,t){var n=this.implementedFilters[t];if(!n)throw new Error('There is no filter called "'+t+'"');return n(e)},e.prototype.randomFilter=function(e){var t=this.variables[e];if("array"!==Object(p.toType)(t))throw new Error("You cannot use the random filter on a non-array");return t[h(0,t.length-1)]},e}(),g=function(){function e(e){var t=e.commands,n=e.targetFunctions,r=e.variables;this.events=new l.EventEmitter,this.targets={},this.runQueue=[],this.nextIndex=0,this.commands=t,this.targets=n,this.variables=r,this.replacer=new y(this.variables),this.setStatus("ready")}return e.prototype.getFunctionFor=function(e){if(!this.targets[e])throw new Error('There is no registered function to execute the "'+e+'" command.');return this.targets[e]},e.prototype.run=function(){return this.canRun()?this.doRun():this.enqueueRun()},e.prototype.on=function(e,t){return this.events.on(e,t)},e.prototype.once=function(e,t){return this.events.once(e,t)},e.prototype.doRun=function(){return this.setStatus("running"),this.runNextCommand(),Promise.resolve(this)},e.prototype.enqueueRun=function(){var e,t=this,n=new Promise(function(n){e=function(){n(t.doRun())}});return this.runQueue.push(e),n},e.prototype.canRun=function(){return"running"!==this.status&&"waiting"!==this.status},e.prototype.setStatus=function(e){this.events.emit(e),this.status=e},e.prototype.resetIndex=function(){this.nextIndex=0},e.prototype.advanceIndex=function(){this.nextIndex++},e.prototype.runNextCommand=function(){var e=this;if("running"===this.status){var t=this.commands[this.nextIndex];t?(this.advanceIndex(),this.runCommand(t).then(function(t){return e.evaluateReturn(t)}).then(function(){return e.runNextCommand()})):this.exit()}},e.prototype.evaluateReturn=function(e){return a(this,void 0,void 0,function(){var t,n,r;return s(this,function(o){switch(o.label){case 0:return t=e.commands,n=e.requests,(r=e.asyncCommands)&&this.asyncSeries(r),t?[4,this.runNewSeries(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[4,this.evaluateRequests(n)];case 3:return o.sent(),[2]}})})},e.prototype.evaluateRequests=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){return e?e.some(function(e){return"exit"===e})?[2,this.exit()]:e.some(function(e){return"pause"===e})?[2,this.pause()]:[2]:[2]})})},e.prototype.exit=function(){this.resetIndex();var e=this.runQueue.shift();e?e():this.setStatus("done")},e.prototype.pause=function(){this.setStatus("paused")},e.prototype.asyncSeries=function(e){var t=this;e.then(function(e){t.runNewSeries(e).catch(function(e){var t=e.message.slice(0,10)+"...";console.error('the error thrown above (beginning "'+t+'") was in an async branch')})}).catch(function(e){"cancelled"!==e&&(console.error("An error occurred inside a promise for an asyncCommands object. This occurred before the commands were invoked on a runner:"),console.error(e))})},e.prototype.runNewSeries=function(t){var n=this;return new Promise(function(r){var o=new e({targetFunctions:n.targets,commands:t,variables:n.variables});o.once("done",r),o.run()}).catch(function(e){throw console.error("a child runner threw an error:"),console.error(e),e})},e.prototype.runCommand=function(e){var t=this.replaceVariables(e);return this.getFunctionFor(t.name)(t)},e.prototype.replaceVariables=function(e){var t=this,n=m(e);return n=Object(p.traverseObject)(n,function(e,n){return"string"===Object(p.toType)(n)&&(n=t.replaceVariableInString(n)),[e,n]},!0,!1)},e.prototype.replaceVariableInString=function(e){return this.replacer.replace(e)},e}(),b=function(e){return{switch:function(t){return Promise.resolve(function(e,t){var n,r=e.variables;return t.do.forEach(function(e){n||(n=function(e,t){var n=function(e){for(var t in e)if(w.hasOwnProperty(t))return t;var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r);throw new Error("could not find a valid operator in switch.do. Given these possibilities: "+n.join(", "))}(e),r=t[e.varName],o=e[n];return function(e,t,n){return(0,w[e])(t,n)}(n,r,o)?e.commands:null}(e,r))}),{commands:n||t.defaultCommands}}(e,t))}}};var w={is:function(e,t){return e===t},isGreaterThan:function(e,t){return e>t},isLessThan:function(e,t){return e<t},isGreaterThanOrEqualTo:function(e,t){return e>=t},isLessThanOrEqualTo:function(e,t){return e<=t},isBetween:function(e,t){return function(e){return Math.min.apply(Math,e)}(t)<=e&&e<=function(e){return Math.max.apply(Math,e)}(t)}};function x(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.settings,o=e.nodes,i=e.variables,a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.settings,o=e.nodes,i=e.variables,a=e.commandRunnerClass,s=new c(r,o,a,i);return t.forEach(function(e){s.registerTargetFunction(e)}),s}.apply(void 0,[{settings:r,nodes:o,variables:i,commandRunnerClass:g}].concat(t));return a.registerTargetFunction(b),a}var C=function(){function e(e){this.name=e,this.commands=[],this.pushType="main"}return e.prototype.getCommands=function(){return this.commands},e.prototype.pusher=function(e){var t=this;if(Array.isArray(e))return e.forEach(function(e){return t.pusher(e)});"condition"===this.pushType?this.switchDo.do[this.switchDo.do.length-1].commands.push(e):"default"===this.pushType?this.switchDo.defaultCommands.push(e):this.commands.push(e)},e.prototype.pushCommands=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.pusher(e)},e.prototype.if=function(e){return null==this.switchDo&&(this.switchDo={name:"switch",do:[],defaultCommands:[]}),this.pushType="condition",e.is?this.switchDo.do.push({varName:e.var,is:e.is,commands:[]}):e.isGreaterThan?this.switchDo.do.push({varName:e.var,isGreaterThan:e.isGreaterThan,commands:[]}):e.isLessThan?this.switchDo.do.push({varName:e.var,isLessThan:e.isLessThan,commands:[]}):e.isBetween?this.switchDo.do.push({varName:e.var,isBetween:e.isBetween,commands:[]}):e.isGreaterThanOrEqualTo?this.switchDo.do.push({varName:e.var,isGreaterThanOrEqualTo:e.isGreaterThanOrEqualTo,commands:[]}):e.isLessThanOrEqualTo&&this.switchDo.do.push({varName:e.var,isGreaterThanOrEqualTo:e.isLessThanOrEqualTo,commands:[]}),this},e.prototype.else=function(){return this.pushType="default",this},e.prototype.endIf=function(){return this.pushType="main",this.pusher(this.switchDo),this},e}();var E=function(){function e(e){void 0===e&&(e={}),this.variables={},this.settings={},this.defaultSettings={baseContainer:document.getElementById(d.baseElementId),baseVideoUrl:"",bgAudioUrl:null,bgAudioLoop:!0},this.nodes=[],this.nodeKlassReference=C,this.additionalFactories=[],this.defineNode=this.node;var t=e.variables,n=e.settings;t&&(this.variables=t),n&&(this.settings=n),this.validateDom()}return e.extend=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(this.nodeKlass),i=[];return t.forEach(function(e){(function(e){return!!e.apiExtensions})(e)&&e.apiExtensions.forEach(function(e){r.prototype[e.apiName]=function(){return e.apiFn.apply(this,arguments),this}}),function(e){return!!e.targetFunctionFactories}(e)&&i.push.apply(i,e.targetFunctionFactories),function(e){return!!e.aliases}(e)&&e.aliases.forEach(function(e){var t=e.target;Object(p.forceArray)(e.aliasAs).forEach(function(e){r.prototype[e]=r.prototype[t]})})}),(e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.additionalFactories=i,t.nodeKlassReference=r,t}return o(t,e),t}(this)).nodeKlass=r,e},e.prototype.node=function(e){var t=new this.nodeKlassReference(e);return this.nodes.push(t),t},e.prototype.run=function(e){this.runOnAnyPlatform(this.getEngine(),e)},e.prototype.createRunButton=function(e,t){var n=this.getEngine(),r=this.createKickoffButton(e);return this.runViaButton(r,n,t),r},e.prototype.getEngine=function(){return this.engine?this.engine:this.engine=x.apply(void 0,[{settings:this.getSettings(),nodes:this.nodes,variables:this.variables}].concat(this.additionalFactories))},e.prototype.validateDom=function(){if(!this.getSetting("baseContainer"))throw new Error("No valid node present in HTML")},e.prototype.getSetting=function(e){return void 0!==this.settings[e]?this.settings[e]:this.defaultSettings[e]},e.prototype.getSettings=function(){for(var e={},t=0,n=Object.keys(this.defaultSettings);t<n.length;t++){var r=n[t];e[r]=this.getSetting(r)}return e},e.prototype.runOnAnyPlatform=function(e,t){this.isMobileOrTablet()?this.runViaButton(this.createKickoffButton(),e,t):e.run(t)},e.prototype.isMobileOrTablet=function(){return Object(u.isMobileOrTablet)()},e.prototype.createKickoffButton=function(e){void 0===e&&(e="Kickoff");var t=document.createElement("button");return t.type="button",t.id="IV-kickoff",t.innerHTML=e,this.getSettings().baseContainer.appendChild(t),t},e.prototype.runViaButton=function(e,t,n){var r=this,o=function(){e.removeEventListener("click",o),r.prepVideosForMobile(),e.remove(),t.run(n)};e.addEventListener("click",o)},e.prototype.prepVideosForMobile=function(){f(document.querySelectorAll("video")).forEach(function(e){e.play(),e.pause()})},e.nodeKlass=C,e}(),k=function(){function e(){}return e.prototype.playVideo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.isArray(e[0])?this.handleDepricatedArrayInput(e[0]):this.handleArrayInput(e)},e.prototype.clearVideo=function(e){var t=[];if(e){var n={name:"wait",time:1e3*e};t.push(n)}return t.push({name:"clearVideo"}),t},e.prototype.handleDepricatedArrayInput=function(e){return console.warn("Passing an array to playVideo is deprecated. Just pass values as individual arguments. (Remove the `[` and `]` from the method call.)"),this.playVideo.apply(this,e)},e.prototype.handleArrayInput=function(e){var t=this;return[e.map(function(e){return t.guaranteedOptionsObject(e)}).reduce(this.mergeMissingUrlsReducer,[]).map(function(e){return t.createPlayCommandFromOptions(e)}).reduceRight(this.reduceOnCompleteIntoPrevious,null)]},e.prototype.mergeMissingUrlsReducer=function(e,t){if(t.url)e.push(t);else{var n=e[e.length-1];if(!n)throw new Error("Previous object does not exist. This error can occur if the first object passed to `playVideo` does not contain a url.");Object.assign(n,t)}return e},e.prototype.reduceOnCompleteIntoPrevious=function(e,t){return e?(t.onComplete=t.onComplete||[],t.onComplete.push(e),t):t},e.prototype.guaranteedOptionsObject=function(e){return"object"==typeof e?e:{url:e}},e.prototype.createPlayCommandFromOptions=function(e){var t={file:e.url},n=this.commandOptionsToCommands(e);return i({},{name:"playVideo"},t,n)},e.prototype.commandOptionsToCommands=function(e){var t=[];function n(e){t=t.concat(e)}return e.runAsync&&n({name:"executeAsync",nodeName:e.runAsync}),e.js&&n({name:"executeJs",func:e.js}),e.runSync&&n({name:"executeSync",nodeName:e.runSync}),e.goToNode&&n([{name:"goToNode",nodeName:e.goToNode},{name:"stopExecution"}]),t.length>0?{onComplete:t}:{}},e}();function O(e){var t=document.createElement("video");return t.id=e,t.setAttribute("playsinline","true"),t.setAttribute("disableRemotePlayback","true"),t.style.display="block",t}var N=new(function(){function e(){this.baseElement=document.body,this.playerContainer=function(){var e=document.createElement("div");return e.className="IV-video-container",e}(),this.players={current:O("IV-video-player-1"),standby:O("IV-video-player-2")}}return e.prototype.playVideo=function(e){var t=this.getStandbyPlayer(),n=this.getCurrentPlayer();return t.onloadeddata=function(){n.src=e,n.play(),t.onloadeddata=function(){}},t.src=e,t.load(),this.whenPlayerEnds(n)},e.prototype.whenPlayerEnds=function(e){return new Promise(function(t){var n=function(){t("video ended"),e.removeEventListener("ended",n)};e.addEventListener("ended",n)})},e.prototype.createPlayers=function(e){this.baseElement=e,this.attachPlayers()},e.prototype.attachPlayers=function(){this.playerContainer.appendChild(this.players.standby),this.playerContainer.appendChild(this.players.current),this.baseElement.appendChild(this.playerContainer)},e.prototype.getCurrentPlayer=function(){return this.players.current},e.prototype.getStandbyPlayer=function(){return this.players.standby},e}()),P=new k;var T=new k;var j={apiExtensions:[{apiName:"playVideo",apiFn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.pushCommands.apply(this,P.playVideo.apply(P,e))}},{apiName:"clearVideo",apiFn:function(e){this.pushCommands.apply(this,T.clearVideo(e))}}],targetFunctionFactories:[function(e){var t=e.settings.baseContainer;return N.createPlayers(t),{playVideo:function(t){var n=""+e.settings.baseVideoUrl+t.file,r=N.playVideo(n),o={};if(t.onComplete){var i=new Promise(function(e,o){r.then(function(){!function(e,t){return v(e)===v(t)}(N.getCurrentPlayer().src,n)?o("cancelled"):e(t.onComplete)})});o.asyncCommands=i}return Promise.resolve(o)}}},function(e){var t=e.settings.baseContainer;return N.createPlayers(t),{clearVideo:function(e){return a(void 0,void 0,void 0,function(){return s(this,function(e){return[2,Promise.resolve({})]})})}}}]};function F(e){var t=document.createElement("audio");return t.id=e,t}var A=new(function(){function e(){this._fadeInterval=200,this.baseElement=document.body,this.players={bg:F("IV-audio-player-bg"),sfx:F("IV-audio-player-sfx")}}return e.prototype.play=function(e,t){var n=this.getPlayerNamed(e);return t&&n.src!==t&&(n.src=t),n.play(),this.whenPlayerEnds(n)},e.prototype.pause=function(e){return this.getPlayerNamed(e).pause(),Promise.resolve("audio paused")},e.prototype.load=function(e,t){var n=this.getPlayerNamed(e);return t&&n.src!==t&&(n.src=t),this.whenPlayerLoads(n)},e.prototype.loop=function(e,t){this.getPlayerNamed(e).loop=t},e.prototype.volume=function(e,t,n){var r=this.getPlayerNamed(e);return n&&n>this._fadeInterval?this.fadeOverTime(r,t,n):r.volume=t,Promise.resolve("audio volume adjusted")},e.prototype.fadeOverTime=function(e,t,n){return a(this,void 0,void 0,function(){var r,o,i,a;return s(this,function(s){switch(s.label){case 0:r=Date.now(),o=e.volume,i=t-o,a=0,s.label=1;case 1:return a<1?(e.volume=o+i*function(){var e=Date.now()-r;return a=Math.min(e/n,1)}(),1===a&&(e.volume=t),[4,function(e){return new Promise(function(t){setTimeout(t,e)})}(this._fadeInterval)]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})},e.prototype.whenPlayerEnds=function(e){return new Promise(function(t){var n=function(){t("audio ended"),e.removeEventListener("ended",n)};e.addEventListener("ended",n)})},e.prototype.whenPlayerLoads=function(e){return new Promise(function(t){var n=function(){t("audio loaded"),e.removeEventListener("loadeddata",n)};e.addEventListener("loadeddata",n)})},e.prototype.createPlayers=function(e){this.baseElement=e,this.attachPlayers()},e.prototype.attachPlayers=function(){this.baseElement.appendChild(this.players.bg),this.baseElement.appendChild(this.players.sfx)},e.prototype.getBgPlayer=function(){return this.players.bg},e.prototype.getSfxPlayer=function(){return this.players.sfx},e.prototype.getPlayerNamed=function(e){return this.players[e.toLowerCase()]},e}());var I={apiExtensions:[{apiName:"bgAudio",apiFn:function(e){this.pushCommands(function(e){if("string"==typeof e)return{name:"audioSource",target:"BG",do:"loop"===e?null:e,loop:"loop"===e||void 0};if(e.action)return{name:"audioSource",target:"BG",do:e.action,file:e.url,loop:e.loop};var t=e,n=t.play,r=t.load,o=t.loop;return n?{name:"audioSource",target:"BG",do:"play",file:n,loop:o}:r?{name:"audioSource",target:"BG",do:"load",file:r,loop:o}:{name:"audioSource",target:"BG",do:null,file:r,loop:o}}(e))}},{apiName:"setVolume",apiFn:function(e){var t=e.volume,n=e.target,r=e.time,o={name:"audioVolume",target:n.toUpperCase(),volume:t,time:r?1e3*r:r};return this.pusher(o),this}}],targetFunctionFactories:[function(e){var t=e.settings.baseContainer;return A.createPlayers(t),{audioVolume:function(e){return e.time?A.volume(e.target,e.volume,e.time):A.volume(e.target,e.volume),Promise.resolve({})}}},function(e){var t=e.settings.baseContainer;return A.createPlayers(t),e.settings.bgAudioUrl&&A.load("BG",e.settings.bgAudioUrl),A.loop("BG",e.settings.bgAudioLoop),{audioSource:function(e){var t=e.target,n=e.file,r=e.loop;switch(e.do){case"play":A.play(t,n);break;case"load":A.load(t,n);break;case"pause":A.pause(t);break;default:throw new Error('unexpected command for audio source: "'+e.do+'"')}return void 0!==r&&A.loop(t,r),Promise.resolve({})}}}]},S=function(){function e(){}return e.prototype.addButton=function(e){return{name:"addButton",id:e.id,text:e.text,onClick:this.createCommands(e)}},e.prototype.removeAllButtons=function(){return{name:"removeAllButtons"}},e.prototype.createCommands=function(e){var t=e.runAsync,n=e.goToNode,r=e.js,o=e.remove,i=e.id,a=[];return t&&a.push({name:"executeAsync",nodeName:t}),r&&a.push({name:"executeJs",func:r}),o&&a.push({name:"removeButton",id:i}),n&&a.push({name:"goToNode",nodeName:n},{name:"stopExecution"}),a},e}(),_=new(function(){function e(){this.allButtons=[]}return e.prototype.createButton=function(e,t){var n=this.newButton(e);return this.addToButtonStore(n),this.appendToDocument(n,t),n},e.prototype.removeAllButtons=function(){this.allButtons=this.allButtons.reduce(function(e,t){return t.remove(),e},[])},e.prototype.removeButton=function(e){this.allButtons.filter(function(t){return t.id===e}).forEach(function(e){return e.remove()})},e.prototype.newButton=function(e){var t=document.createElement("button");return this.applySettingsToButton(t,e),t},e.prototype.applySettingsToButton=function(e,t){var n=m(t);n.onclick=n.onClick,delete n.onClick,e.innerHTML=n.text,delete n.text,Object(p.traverseObject)(n,function(t,n){e[t]=n},!1,!1)},e.prototype.addToButtonStore=function(e){this.allButtons.push(e)},e.prototype.appendToDocument=function(e,t){this.getContainer(t).appendChild(e)},e.prototype.getContainer=function(e){var t=e||this.baseElement(),n=function(e,t){var n=e.getAttribute("class");e.setAttribute("class",n+" IV-searching");var r=e.parentNode.querySelectorAll(".IV-searching > "+t);return e.setAttribute("class",n),f(r)}(t,"."+d.buttonContainerClass)[0];if(n)return n;var r=document.createElement("div");return r.setAttribute("class",d.buttonContainerClass),t.appendChild(r),r},e.prototype.baseElement=function(){return document.getElementById(d.baseElementId)},e}()),B=new S;var V={apiExtensions:[{apiName:"addButton",apiFn:function(e){var t=B.addButton(e);this.pushCommands(t)}},{apiName:"removeAllButtons",apiFn:function(){var e=B.removeAllButtons();this.pushCommands(e)}}],targetFunctionFactories:[function(e){var t=e.settings.baseContainer;return{addButton:function(n){var r={onClick:function(){return e.commandEngine.runCommands(n.onClick)},text:n.text,id:n.id};return _.createButton(r,t),Promise.resolve({})}}},function(e){e.settings.baseContainer;return{removeAllButtons:function(e){return _.removeAllButtons(),Promise.resolve({})}}},function(e){e.settings.baseContainer;return{removeButton:function(e){return _.removeButton(e.id),Promise.resolve({})}}}]};var L={add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t},remainderAfterDivideBy:function(e,t){return e%t},roundDownAfterDivideBy:function(e,t){return Math.floor(e/t)},roundUpAfterDivideBy:function(e,t){return Math.ceil(e/t)},roundAfterDivideBy:function(e,t){return Math.round(e/t)},round:function(e){return Math.round(e)},roundUp:function(e){return Math.ceil(e)},roundDown:function(e){return Math.floor(e)}};var R={apiExtensions:[{apiName:"setVariable",apiFn:function(e){if(e.var){var t={name:"assignFromVariable",varName:e.var,assignTo:e.storeIn};this.pushCommands(t)}else e.value&&(t={name:"assignVariable",value:e.value,assignTo:e.storeIn},this.pushCommands(t));return this}},{apiName:"calculate",apiFn:function(e){!function(e){var t=[],n=Object.keys(L),r=Object.keys(e),o=r.filter(function(e){return n.indexOf(e)>-1}),i=r.filter(function(e){return-1===["var","storeIn"].concat(n).indexOf(e)});if(e.var||t.push('It did not contain a "var" property.'),o.length<1&&t.push("It contained no known operations (add, subtract, etc)."),o.length>1&&t.push("It contained more than one operation (add, subtract, etc)."),i.length>0){var a=i.map(function(e){return'"'+e+'"'}).join(", ").replace(/, ([^,]*)$/,", and $1");t.push("It contained unknown "+(i.length>1?"properties":"property")+" "+a+".")}if(t.length>0){var s=r.map(function(t){var n=e[t];return t+": "+(n="string"==typeof n?'"'+n+'"':n)}),u=n.map(function(e){return'"'+e+'"'}).join(", ").replace(/, ([^,]*)$/,", or $1"),c=t.join("\n")+'\n\nThe `calculate()` command expects an object with properties "var", and then exactly one of '+u+'. Optionally also "storeIn" If you don\'t want to overwrite the current variable.\n\nReceived {'+s.join(", ")+"}";throw new Error(c)}}(e);var t=Object.keys(L),n=Object.keys(e).filter(function(e){return t.indexOf(e)>-1})[0],r=e[n],o=e.storeIn?e.storeIn:e.var,i={name:"calculate",varName:e.var,operation:n,value:r,assignTo:o};this.pushCommands(i)}},{apiName:"getRandom",apiFn:function(e){var t={name:"getRandomNumber",min:e.min,max:e.max,assignTo:e.storeIn};this.pushCommands(t)}}],targetFunctionFactories:[function(e){return{assignVariable:function(t){return e.variables[t.assignTo]=t.value,Promise.resolve({})}}},function(e){return{assignFromVariable:function(t){return e.variables[t.assignTo]=e.variables[t.varName],Promise.resolve({})}}},function(e){return{calculate:function(t){return Promise.resolve(function(e,t){var n=e.variables,r=t.operation,o=t.varName,i=t.assignTo,a=t.value;if("string"==typeof a){console.warn("The value passed in to the calculate command was not resolved to a number. Attempting to parse it as a number. Beware unexpected results. It is best to ensure that the variable you are using as the operand in the calculate command will evaluate to a number, not a string.");var s=parseFloat(a);if(Number.isNaN(s))throw new Error("Could not parse string as number");a=s}if("number"!=typeof a)throw new Error("The variable that was used in the calculate command did not resolve to anything number-like. Your attempted invocation would have looked something like .calculate({var: '"+o+"', "+r+": 'SOME_VARIABLE_NAME'})...");var u=n[o];return n[i]=function(e){var t=L[e];if(!t)throw new Error('There is no "'+e+'" operation in the calculate command');return t}(r)(u,a),{}}(e,t))}}},function(e){return{getRandomNumber:function(t){return Promise.resolve(function(e,t){return e.variables[t.assignTo]=h(t.min,t.max),{}}(e,t))}}}]};function M(e){var t={name:"executeAsync",nodeName:e};this.pushCommands(t)}function D(e){var t={name:"executeSync",nodeName:e};this.pushCommands(t)}function q(){this.pushCommands({name:"stopExecution"})}var z=function(e,t,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return console.warn("The "+e+" command has been deprecated. Please use "+t+" instead. If you like the old name better, consider aliasing the function. See IVjs documentaion regarding plugins for an explanation."),n.apply(this,r)}},U={apiExtensions:[{apiName:"return",apiFn:z("return","endAllNodes",q)},{apiName:"goSub",apiFn:z("goSub","runSync",D)},{apiName:"execute",apiFn:z("execute","runAsync",M)},{apiName:"endAllNodes",apiFn:q},{apiName:"runSync",apiFn:D},{apiName:"runAsync",apiFn:M},{apiName:"goToNode",apiFn:function(e){var t=function(e){return[{name:"goToNode",nodeName:e},{name:"stopExecution"}]}(e);this.pushCommands.apply(this,t)}},{apiName:"wait",apiFn:function(e){var t={name:"wait",time:1e3*e};this.pushCommands(t)}}],targetFunctionFactories:[function(e){return{stopExecution:function(e){return Promise.resolve({requests:["exit"]})}}},function(e){return{pauseExecution:function(e){return Promise.resolve({requests:["pause"]})}}},function(e){return{executeAsync:function(t){return e.commandEngine.runNodeByName(t.nodeName),Promise.resolve({})}}},function(e){return{executeSync:function(t){var n={};return new Promise(function(r){return a(void 0,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,e.commandEngine.runNodeByName(t.nodeName)];case 1:return o.sent().once("done",function(){return r(n)}),[2]}})})})}}},function(e){return{goToNode:function(t){return e.commandEngine.runNodeByName(t.nodeName),Promise.resolve({})}}},function(e){return{wait:function(e){var t={};return new Promise(function(n){setTimeout(function(){return n(t)},e.time)})}}}]};var G={apiExtensions:[{apiName:"log",apiFn:function(e){var t={name:"log",value:e};this.pushCommands(t)}}],targetFunctionFactories:[function(e){return{log:function(t){return null==t.value?console.log(e.variables):console.log(t.value),Promise.resolve({})}}}]},K={apiExtensions:[{apiName:"js",apiFn:function(e){this.pushCommands({name:"executeJs",func:e})}}],targetFunctionFactories:[function(e){return{executeJs:function(e){return a(void 0,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(e.func())];case 1:return t.sent(),[2,{}]}})})}}}]},Q=E.extend(K,j,I,V,G,R,U);n.d(t,"IV",function(){return Q})}])});
//# sourceMappingURL=iv.js.map